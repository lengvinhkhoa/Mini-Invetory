module.exports=[49846,a=>{"use strict";a.s(["default",()=>E],49846);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(11642),f=a.i(35475),g=a.i(95245),h=a.i(56757),i=a.i(59501),j=a.i(14574),k=a.i(99570),l=a.i(66718),m=a.i(29246),n=a.i(41921),o=a.i(80701),p=a.i(91119),q=a.i(23292),r=a.i(77929);let s=h.z.object({displayName:h.z.string().min(2,"Tên tối thiểu 2 ký tự"),role:h.z.enum(["admin","manager","staff"],{required_error:"Vui lòng chọn vai trò"}),warehouseName:h.z.string().min(2,"Tên kho tối thiểu 2 ký tự"),warehouseAddress:h.z.string().min(5,"Địa chỉ tối thiểu 5 ký tự"),warehouseCapacity:h.z.string().min(1,"Sức chứa là bắt buộc")});function t({open:a,onComplete:d}){let[f,h]=(0,c.useState)(!1),[t,u]=(0,c.useState)(1),{user:v}=(0,e.useAuth)(),w=(0,g.useForm)({resolver:(0,i.zodResolver)(s),defaultValues:{displayName:v?.displayName||"",role:"manager",warehouseName:"",warehouseAddress:"",warehouseCapacity:""}}),x=async a=>{if(v){h(!0);try{let b=await r.firestoreService.createWarehouse({name:a.warehouseName,address:a.warehouseAddress,capacity:parseInt(a.warehouseCapacity),currentStock:0,totalItems:0,ownerId:v.uid,managers:[v.uid],status:"active"}),c={uid:v.uid,email:v.email||"",displayName:a.displayName,role:a.role,warehouses:[b],permissions:{canManageInventory:"admin"===a.role||"manager"===a.role,canProcessOrders:!0,canViewReports:"admin"===a.role||"manager"===a.role},isSetupComplete:!0};await r.firestoreService.createUserProfile(c),q.toast.success("Thiết lập tài khoản thành công!");let e={...c,createdAt:new Date,lastLogin:new Date};d(e)}catch(a){console.error("Setup error:",a),q.toast.error("Lỗi khi thiết lập tài khoản: "+a.message)}finally{h(!1)}}},y=async()=>{await w.trigger(["displayName","role"])&&u(2)};return(0,b.jsx)(j.Dialog,{open:a,children:(0,b.jsxs)(j.DialogContent,{className:"sm:max-w-[500px]",onPointerDownOutside:a=>a.preventDefault(),children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Thiết lập tài khoản"}),(0,b.jsx)(j.DialogDescription,{children:"Chào mừng! Hãy thiết lập thông tin cơ bản để bắt đầu sử dụng hệ thống."})]}),(0,b.jsx)(n.Form,{...w,children:(0,b.jsxs)("form",{onSubmit:w.handleSubmit(x),className:"space-y-6",children:[1===t&&(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Thông tin cá nhân"}),(0,b.jsx)(p.CardDescription,{children:"Bước 1/2: Cung cấp thông tin về bạn"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsx)(n.FormField,{control:w.control,name:"displayName",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Tên hiển thị"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Nguyễn Văn A",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:w.control,name:"role",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Vai trò"}),(0,b.jsxs)(o.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{placeholder:"Chọn vai trò của bạn"})})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"admin",children:"Quản trị viên"}),(0,b.jsx)(o.SelectItem,{value:"manager",children:"Quản lý kho"}),(0,b.jsx)(o.SelectItem,{value:"staff",children:"Nhân viên"})]})]}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(k.Button,{type:"button",onClick:y,className:"w-full",children:"Tiếp theo"})]})]}),2===t&&(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Thiết lập kho hàng"}),(0,b.jsx)(p.CardDescription,{children:"Bước 2/2: Tạo kho hàng đầu tiên"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsx)(n.FormField,{control:w.control,name:"warehouseName",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Tên kho hàng"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Kho Hà Nội",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:w.control,name:"warehouseAddress",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Địa chỉ"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(m.Textarea,{placeholder:"123 Nguyễn Trãi, Thanh Xuân, Hà Nội",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:w.control,name:"warehouseCapacity",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Sức chứa (m²)"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(l.Input,{type:"number",placeholder:"1000",...a})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.Button,{type:"button",variant:"outline",onClick:()=>u(1),className:"flex-1",children:"Quay lại"}),(0,b.jsx)(k.Button,{type:"submit",disabled:f,className:"flex-1",children:f?"Đang thiết lập...":"Hoàn thành"})]})]})]})]})})]})})}var u=a.i(86304),v=a.i(76243),w=a.i(83497),x=a.i(24669);let y=(0,a.i(70106).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var z=a.i(90166),A=a.i(60246),B=a.i(70893),C=a.i(73570),D=a.i(90669);function E(){var a;let g=(0,d.useRouter)(),{user:h}=(0,e.useAuth)(),{userProfile:i,loading:j}=(0,f.useUser)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null);(0,c.useEffect)(()=>{j||!h||i?i&&(o(i),m(!1)):m(!0)},[h,i,j]);let q=a=>{o(a),m(!1)};return j?(0,b.jsx)(v.LoadingState,{message:"Đang tải thông tin tài khoản..."}):n?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tổng quan"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Chào mừng trở lại, ",n.displayName,"! Đây là tình hình hệ thống của bạn."]})]}),(0,b.jsx)(u.Badge,{variant:{admin:"destructive",manager:"default",staff:"secondary"}[n.role]||"default",className:"text-sm",children:{admin:"Quản trị viên",manager:"Quản lý kho",staff:"Nhân viên"}[a=n.role]||a})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Tổng sản phẩm"}),(0,b.jsx)(w.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(p.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"1,234"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-green-600",children:"+12%"})," so với tháng trước"]})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Giá trị tồn kho"}),(0,b.jsx)(z.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(p.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"₫2.4M"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-green-600",children:"+8%"})," so với tháng trước"]})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Giao dịch hôm nay"}),(0,b.jsx)(D.Activity,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(p.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"47"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-red-600",children:"-3%"})," so với hôm qua"]})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(p.CardTitle,{className:"text-sm font-medium",children:"Cảnh báo"}),(0,b.jsx)(C.AlertTriangle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(p.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"3"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sản phẩm sắp hết hàng"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-7",children:[(0,b.jsxs)(p.Card,{className:"col-span-4",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{children:"Hoạt động gần đây"}),(0,b.jsx)(p.CardDescription,{children:"Các giao dịch nhập/xuất trong 7 ngày qua"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:[{type:"IN",item:"Laptop Dell XPS 13",quantity:5,time:"2 giờ trước",user:"Nguyễn Văn A"},{type:"OUT",item:"iPhone 15 Pro",quantity:2,time:"4 giờ trước",user:"Trần Thị B"},{type:"IN",item:"Samsung Galaxy S24",quantity:10,time:"6 giờ trước",user:"Lê Văn C"},{type:"OUT",item:"MacBook Air M2",quantity:1,time:"8 giờ trước",user:"Phạm Thị D"}].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${"IN"===a.type?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:"IN"===a.type?(0,b.jsx)(x.TrendingUp,{className:"h-4 w-4"}):(0,b.jsx)(y,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("p",{className:"text-sm font-medium leading-none",children:["IN"===a.type?"Nhập":"Xuất"," ",a.quantity," ",a.item]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.user," • ",a.time]})]})]},c))})})]}),(0,b.jsxs)(p.Card,{className:"col-span-3",children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{children:"Thống kê nhanh"}),(0,b.jsx)(p.CardDescription,{children:"Tình hình kho hàng hiện tại"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(B.Warehouse,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:"Số kho hàng"})]}),(0,b.jsx)("span",{className:"font-medium",children:n.warehouses.length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(A.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:"Nhân viên"})]}),(0,b.jsx)("span",{className:"font-medium",children:"12"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(w.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:"Danh mục"})]}),(0,b.jsx)("span",{className:"font-medium",children:"8"})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Quyền hạn của bạn"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quản lý hàng hóa"}),(0,b.jsx)(u.Badge,{variant:n.permissions.canManageInventory?"default":"secondary",className:"text-xs",children:n.permissions.canManageInventory?"Có":"Không"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Xử lý đơn hàng"}),(0,b.jsx)(u.Badge,{variant:n.permissions.canProcessOrders?"default":"secondary",className:"text-xs",children:n.permissions.canProcessOrders?"Có":"Không"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Xem báo cáo"}),(0,b.jsx)(u.Badge,{variant:n.permissions.canViewReports?"default":"secondary",className:"text-xs",children:n.permissions.canViewReports?"Có":"Không"})]})]})]})]})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{children:"Thao tác nhanh"}),(0,b.jsx)(p.CardDescription,{children:"Các tác vụ thường dùng để quản lý kho hàng"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(k.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>g.push("/dashboard/inventory"),children:[(0,b.jsx)(w.Package,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"Thêm sản phẩm"})]}),(0,b.jsxs)(k.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>g.push("/dashboard/inventory"),children:[(0,b.jsx)(x.TrendingUp,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"Nhập hàng"})]}),(0,b.jsxs)(k.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>g.push("/dashboard/inventory"),children:[(0,b.jsx)(y,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"Xuất hàng"})]}),(0,b.jsxs)(k.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>g.push("/dashboard/reports"),children:[(0,b.jsx)(D.Activity,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"Xem báo cáo"})]})]})})]}),(0,b.jsx)(t,{open:l,onComplete:q})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.LoadingState,{message:"Đang thiết lập tài khoản của bạn..."}),(0,b.jsx)(t,{open:l,onComplete:q})]})}}];

//# sourceMappingURL=src_app_dashboard_page_tsx_196c74b5._.js.map