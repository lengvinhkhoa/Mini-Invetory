(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,43432,e=>{"use strict";e.s(["MapPin",()=>s],46897);var t=e.i(75254);let s=(0,t.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["Phone",()=>a],43432);let a=(0,t.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},15288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>n]);var t=e.i(43476),s=e.i(75157);function a(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function r(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function n(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...r})}function i(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...r})}function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...r})}},21218,e=>{"use strict";e.s(["Activity",()=>t],21218);let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},81207,63488,e=>{"use strict";e.s(["WarehouseForm",()=>j],81207);var t=e.i(43476),s=e.i(71645),a=e.i(53145),r=e.i(81307),n=e.i(94814),i=e.i(76639),l=e.i(19455),c=e.i(93479),d=e.i(24687),o=e.i(3133),h=e.i(67489),m=e.i(46696),x=e.i(26633);let u=r.z.object({name:r.z.string().min(2,"Tên kho tối thiểu 2 ký tự"),address:r.z.string().min(5,"Địa chỉ tối thiểu 5 ký tự"),capacity:r.z.string().min(1,"Sức chứa là bắt buộc"),description:r.z.string().optional(),phone:r.z.string().optional(),email:r.z.string().email("Email không hợp lệ").optional().or(r.z.literal("")),status:r.z.enum(["active","inactive","maintenance"])});function j(e){var r;let{open:j,onClose:g,onSuccess:p,warehouse:f,mode:N}=e,[v,y]=(0,s.useState)(!1),C=(0,a.useForm)({resolver:(0,n.zodResolver)(u),defaultValues:{name:(null==f?void 0:f.name)||"",address:(null==f?void 0:f.address)||"",capacity:(null==f||null==(r=f.capacity)?void 0:r.toString())||"",description:(null==f?void 0:f.description)||"",phone:(null==f?void 0:f.phone)||"",email:(null==f?void 0:f.email)||"",status:(null==f?void 0:f.status)||"active"}}),b=async e=>{y(!0);try{if("create"===N){let t={name:e.name,address:e.address,capacity:parseInt(e.capacity),description:e.description,phone:e.phone,email:e.email,status:e.status,currentStock:0,totalItems:0,ownerId:"",managers:[]},s={id:await x.firestoreService.createWarehouse(t),...t,createdAt:new Date,updatedAt:new Date};m.toast.success("Tạo kho hàng thành công!"),p(s)}else if("edit"===N&&f){let t={name:e.name,address:e.address,capacity:parseInt(e.capacity),description:e.description,phone:e.phone,email:e.email,status:e.status};await x.firestoreService.updateWarehouse(f.id,t);let s={...f,...t,updatedAt:new Date};m.toast.success("Cập nhật kho hàng thành công!"),p(s)}C.reset(),g()}catch(e){console.error("Warehouse form error:",e),m.toast.error("Lỗi: "+e.message)}finally{y(!1)}},w=()=>{C.reset(),g()};return(0,t.jsx)(i.Dialog,{open:j,onOpenChange:w,children:(0,t.jsxs)(i.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsx)(i.DialogTitle,{children:"create"===N?"Tạo kho hàng mới":"Chỉnh sửa kho hàng"}),(0,t.jsx)(i.DialogDescription,{children:"create"===N?"Điền thông tin để tạo kho hàng mới":"Cập nhật thông tin kho hàng"})]}),(0,t.jsx)(o.Form,{...C,children:(0,t.jsxs)("form",{onSubmit:C.handleSubmit(b),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(o.FormField,{control:C.control,name:"name",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Tên kho hàng *"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Input,{placeholder:"Kho Hà Nội",...s})}),(0,t.jsx)(o.FormMessage,{})]})}}),(0,t.jsx)(o.FormField,{control:C.control,name:"status",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Trạng thái"}),(0,t.jsxs)(h.Select,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{placeholder:"Chọn trạng thái"})})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"active",children:"Hoạt động"}),(0,t.jsx)(h.SelectItem,{value:"inactive",children:"Tạm dừng"}),(0,t.jsx)(h.SelectItem,{value:"maintenance",children:"Bảo trì"})]})]}),(0,t.jsx)(o.FormMessage,{})]})}})]}),(0,t.jsx)(o.FormField,{control:C.control,name:"address",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Địa chỉ *"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(d.Textarea,{placeholder:"123 Nguyễn Trãi, Thanh Xuân, Hà Nội",...s})}),(0,t.jsx)(o.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(o.FormField,{control:C.control,name:"capacity",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Sức chứa (m²) *"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Input,{type:"number",placeholder:"1000",...s})}),(0,t.jsx)(o.FormMessage,{})]})}}),(0,t.jsx)(o.FormField,{control:C.control,name:"phone",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Số điện thoại"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Input,{placeholder:"0123456789",...s})}),(0,t.jsx)(o.FormMessage,{})]})}})]}),(0,t.jsx)(o.FormField,{control:C.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Email"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Input,{type:"email",placeholder:"warehouse@company.com",...s})}),(0,t.jsx)(o.FormMessage,{})]})}}),(0,t.jsx)(o.FormField,{control:C.control,name:"description",render:e=>{let{field:s}=e;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Mô tả"}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(d.Textarea,{placeholder:"Mô tả về kho hàng...",...s})}),(0,t.jsx)(o.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:w,disabled:v,children:"Hủy"}),(0,t.jsx)(l.Button,{type:"submit",disabled:v,children:v?"create"===N?"Đang tạo...":"Đang cập nhật...":"create"===N?"Tạo kho hàng":"Cập nhật"})]})]})})]})})}e.s(["Mail",()=>g],63488);let g=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},82101,e=>{"use strict";e.s(["default",()=>C]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(15288),n=e.i(19455),i=e.i(87486),l=e.i(72436),c=e.i(65033),d=e.i(81207),o=e.i(26633),h=e.i(46696),m=e.i(71689),x=e.i(46897),u=e.i(43432),j=e.i(63488),g=e.i(61911),p=e.i(88844),f=e.i(21218),N=e.i(88511),v=e.i(87316),y=e.i(17923);function C(){let e=(0,a.useParams)(),C=(0,a.useRouter)(),[b,w]=(0,s.useState)(null),[k,F]=(0,s.useState)(!0),[S,T]=(0,s.useState)(!1),M=e.id,L=async()=>{try{F(!0);let e=await o.firestoreService.getWarehouse(M);if(!e){h.toast.error("Không tìm thấy kho hàng"),C.push("/dashboard/warehouses");return}w(e)}catch(e){console.error("Error loading warehouse:",e),h.toast.error("Lỗi khi tải thông tin kho hàng"),C.push("/dashboard/warehouses")}finally{F(!1)}};return((0,s.useEffect)(()=>{M&&L()},[M]),k)?(0,t.jsx)(c.LoadingState,{message:"Đang tải thông tin kho hàng..."}):b?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>C.push("/dashboard/warehouses"),children:[(0,t.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Quay lại"]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:b.name}),(e=>{switch(e){case"active":return(0,t.jsx)(i.Badge,{variant:"default",className:"bg-green-100 text-green-800",children:"Hoạt động"});case"inactive":return(0,t.jsx)(i.Badge,{variant:"secondary",children:"Tạm dừng"});case"maintenance":return(0,t.jsx)(i.Badge,{variant:"outline",className:"border-yellow-500 text-yellow-700",children:"Bảo trì"});default:return(0,t.jsx)(i.Badge,{variant:"outline",children:"Không xác định"})}})(b.status)]}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center mt-1",children:[(0,t.jsx)(x.MapPin,{className:"h-4 w-4 mr-1"}),b.address]})]})]}),(0,t.jsxs)(n.Button,{onClick:()=>T(!0),children:[(0,t.jsx)(N.Edit,{className:"mr-2 h-4 w-4"}),"Chỉnh sửa"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Sức chứa"}),(0,t.jsx)(p.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[b.capacity.toLocaleString()," m²"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tổng diện tích"})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Đã sử dụng"}),(0,t.jsx)(f.Activity,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[b.currentStock.toLocaleString()," m²"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(b.currentStock/b.capacity*100).toFixed(1),"% sức chứa"]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Sản phẩm"}),(0,t.jsx)(p.Package,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:b.totalItems||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tổng số mặt hàng"})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Quản lý"}),(0,t.jsx)(g.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:b.managers.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Người quản lý"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Thông tin kho hàng"}),(0,t.jsx)(r.CardDescription,{children:"Chi tiết về kho hàng và thông tin liên hệ"})]}),(0,t.jsx)(r.CardContent,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Địa chỉ"}),(0,t.jsxs)("p",{className:"flex items-center mt-1",children:[(0,t.jsx)(x.MapPin,{className:"h-4 w-4 mr-2 text-muted-foreground"}),b.address]})]}),b.phone&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Số điện thoại"}),(0,t.jsxs)("p",{className:"flex items-center mt-1",children:[(0,t.jsx)(u.Phone,{className:"h-4 w-4 mr-2 text-muted-foreground"}),b.phone]})]}),b.email&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,t.jsxs)("p",{className:"flex items-center mt-1",children:[(0,t.jsx)(j.Mail,{className:"h-4 w-4 mr-2 text-muted-foreground"}),b.email]})]}),b.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Mô tả"}),(0,t.jsx)("p",{className:"mt-1 text-sm",children:b.description})]}),(0,t.jsx)(l.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Ngày tạo"}),(0,t.jsxs)("p",{className:"flex items-center mt-1",children:[(0,t.jsx)(v.Calendar,{className:"h-4 w-4 mr-2 text-muted-foreground"}),b.createdAt.toLocaleDateString("vi-VN")]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Cập nhật"}),(0,t.jsxs)("p",{className:"flex items-center mt-1",children:[(0,t.jsx)(v.Calendar,{className:"h-4 w-4 mr-2 text-muted-foreground"}),b.updatedAt.toLocaleDateString("vi-VN")]})]})]})]})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Sức chứa kho hàng"}),(0,t.jsx)(r.CardDescription,{children:"Tình trạng sử dụng diện tích kho"})]}),(0,t.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Đã sử dụng"}),(0,t.jsxs)("span",{className:"font-medium",children:[b.currentStock.toLocaleString()," m²"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,t.jsx)("div",{className:"h-4 rounded-full ".concat(((e,t)=>{let s=e/t*100;return s>=90?"bg-red-500":s>=70?"bg-yellow-500":"bg-green-500"})(b.currentStock,b.capacity)),style:{width:"".concat(Math.min(b.currentStock/b.capacity*100,100),"%")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"0 m²"}),(0,t.jsxs)("span",{children:[b.capacity.toLocaleString()," m²"]})]})]}),(0,t.jsx)(l.Separator,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Tỷ lệ sử dụng"}),(0,t.jsxs)("span",{className:"text-lg font-bold",children:[(b.currentStock/b.capacity*100).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Diện tích còn lại"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[(b.capacity-b.currentStock).toLocaleString()," m²"]})]})]})]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Hoạt động gần đây"}),(0,t.jsx)(r.CardDescription,{children:"Các giao dịch nhập/xuất kho trong 7 ngày qua"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(y.BarChart3,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Đang phát triển"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Tính năng theo dõi hoạt động sẽ sớm được cập nhật"})]})})]}),(0,t.jsx)(d.WarehouseForm,{open:S,onClose:()=>T(!1),onSuccess:e=>{w(e)},warehouse:b,mode:"edit"})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Không tìm thấy kho hàng"}),(0,t.jsx)(n.Button,{onClick:()=>C.push("/dashboard/warehouses"),children:"Quay lại danh sách"})]})}}]);