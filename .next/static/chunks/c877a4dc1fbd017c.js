(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";e.s(["Card",()=>t,"CardContent",()=>l,"CardDescription",()=>i,"CardHeader",()=>n,"CardTitle",()=>r]);var s=e.i(43476),a=e.i(75157);function t(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...n})}function n(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...n})}function r(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...n})}function i(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...n})}function l(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...n})}},21218,e=>{"use strict";e.s(["Activity",()=>s],21218);let s=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},78894,e=>{"use strict";e.s(["AlertTriangle",()=>s],78894);let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},12426,e=>{"use strict";e.s(["DollarSign",()=>s],12426);let s=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},30257,e=>{"use strict";e.s(["default",()=>D],30257);var s=e.i(43476),a=e.i(71645),t=e.i(18566),n=e.i(57951),r=e.i(33277),i=e.i(53145),l=e.i(81307),c=e.i(94814),d=e.i(76639),o=e.i(19455),h=e.i(93479),m=e.i(24687),x=e.i(3133),u=e.i(67489),j=e.i(15288),p=e.i(46696),g=e.i(26633);let N=l.z.object({displayName:l.z.string().min(2,"Tên tối thiểu 2 ký tự"),role:l.z.enum(["admin","manager","staff"],{required_error:"Vui lòng chọn vai trò"}),warehouseName:l.z.string().min(2,"Tên kho tối thiểu 2 ký tự"),warehouseAddress:l.z.string().min(5,"Địa chỉ tối thiểu 5 ký tự"),warehouseCapacity:l.z.string().min(1,"Sức chứa là bắt buộc")});function f(e){let{open:t,onComplete:r}=e,[l,f]=(0,a.useState)(!1),[y,C]=(0,a.useState)(1),{user:v}=(0,n.useAuth)(),b=(0,i.useForm)({resolver:(0,c.zodResolver)(N),defaultValues:{displayName:(null==v?void 0:v.displayName)||"",role:"manager",warehouseName:"",warehouseAddress:"",warehouseCapacity:""}}),w=async e=>{if(v){f(!0);try{let s=await g.firestoreService.createWarehouse({name:e.warehouseName,address:e.warehouseAddress,capacity:parseInt(e.warehouseCapacity),currentStock:0,totalItems:0,ownerId:v.uid,managers:[v.uid],status:"active"}),a={uid:v.uid,email:v.email||"",displayName:e.displayName,role:e.role,warehouses:[s],permissions:{canManageInventory:"admin"===e.role||"manager"===e.role,canProcessOrders:!0,canViewReports:"admin"===e.role||"manager"===e.role},isSetupComplete:!0};await g.firestoreService.createUserProfile(a),p.toast.success("Thiết lập tài khoản thành công!");let t={...a,createdAt:new Date,lastLogin:new Date};r(t)}catch(e){console.error("Setup error:",e),p.toast.error("Lỗi khi thiết lập tài khoản: "+e.message)}finally{f(!1)}}},T=async()=>{await b.trigger(["displayName","role"])&&C(2)};return(0,s.jsx)(d.Dialog,{open:t,children:(0,s.jsxs)(d.DialogContent,{className:"sm:max-w-[500px]",onPointerDownOutside:e=>e.preventDefault(),children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:"Thiết lập tài khoản"}),(0,s.jsx)(d.DialogDescription,{children:"Chào mừng! Hãy thiết lập thông tin cơ bản để bắt đầu sử dụng hệ thống."})]}),(0,s.jsx)(x.Form,{...b,children:(0,s.jsxs)("form",{onSubmit:b.handleSubmit(w),className:"space-y-6",children:[1===y&&(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsx)(j.CardTitle,{className:"text-lg",children:"Thông tin cá nhân"}),(0,s.jsx)(j.CardDescription,{children:"Bước 1/2: Cung cấp thông tin về bạn"})]}),(0,s.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,s.jsx)(x.FormField,{control:b.control,name:"displayName",render:e=>{let{field:a}=e;return(0,s.jsxs)(x.FormItem,{children:[(0,s.jsx)(x.FormLabel,{children:"Tên hiển thị"}),(0,s.jsx)(x.FormControl,{children:(0,s.jsx)(h.Input,{placeholder:"Nguyễn Văn A",...a})}),(0,s.jsx)(x.FormMessage,{})]})}}),(0,s.jsx)(x.FormField,{control:b.control,name:"role",render:e=>{let{field:a}=e;return(0,s.jsxs)(x.FormItem,{children:[(0,s.jsx)(x.FormLabel,{children:"Vai trò"}),(0,s.jsxs)(u.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(x.FormControl,{children:(0,s.jsx)(u.SelectTrigger,{children:(0,s.jsx)(u.SelectValue,{placeholder:"Chọn vai trò của bạn"})})}),(0,s.jsxs)(u.SelectContent,{children:[(0,s.jsx)(u.SelectItem,{value:"admin",children:"Quản trị viên"}),(0,s.jsx)(u.SelectItem,{value:"manager",children:"Quản lý kho"}),(0,s.jsx)(u.SelectItem,{value:"staff",children:"Nhân viên"})]})]}),(0,s.jsx)(x.FormMessage,{})]})}}),(0,s.jsx)(o.Button,{type:"button",onClick:T,className:"w-full",children:"Tiếp theo"})]})]}),2===y&&(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsx)(j.CardTitle,{className:"text-lg",children:"Thiết lập kho hàng"}),(0,s.jsx)(j.CardDescription,{children:"Bước 2/2: Tạo kho hàng đầu tiên"})]}),(0,s.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,s.jsx)(x.FormField,{control:b.control,name:"warehouseName",render:e=>{let{field:a}=e;return(0,s.jsxs)(x.FormItem,{children:[(0,s.jsx)(x.FormLabel,{children:"Tên kho hàng"}),(0,s.jsx)(x.FormControl,{children:(0,s.jsx)(h.Input,{placeholder:"Kho Hà Nội",...a})}),(0,s.jsx)(x.FormMessage,{})]})}}),(0,s.jsx)(x.FormField,{control:b.control,name:"warehouseAddress",render:e=>{let{field:a}=e;return(0,s.jsxs)(x.FormItem,{children:[(0,s.jsx)(x.FormLabel,{children:"Địa chỉ"}),(0,s.jsx)(x.FormControl,{children:(0,s.jsx)(m.Textarea,{placeholder:"123 Nguyễn Trãi, Thanh Xuân, Hà Nội",...a})}),(0,s.jsx)(x.FormMessage,{})]})}}),(0,s.jsx)(x.FormField,{control:b.control,name:"warehouseCapacity",render:e=>{let{field:a}=e;return(0,s.jsxs)(x.FormItem,{children:[(0,s.jsx)(x.FormLabel,{children:"Sức chứa (m²)"}),(0,s.jsx)(x.FormControl,{children:(0,s.jsx)(h.Input,{type:"number",placeholder:"1000",...a})}),(0,s.jsx)(x.FormMessage,{})]})}}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>C(1),className:"flex-1",children:"Quay lại"}),(0,s.jsx)(o.Button,{type:"submit",disabled:l,className:"flex-1",children:l?"Đang thiết lập...":"Hoàn thành"})]})]})]})]})})]})})}var y=e.i(87486),C=e.i(65033),v=e.i(88844),b=e.i(25652);let w=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var T=e.i(12426),k=e.i(61911),F=e.i(33785),S=e.i(78894),I=e.i(21218);function D(){var e;let i=(0,t.useRouter)(),{user:l}=(0,n.useAuth)(),{userProfile:c,loading:d}=(0,r.useUser)(),[h,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{d||!l||c?c&&(u(c),m(!1)):m(!0)},[l,c,d]);let p=e=>{u(e),m(!1)};return d?(0,s.jsx)(C.LoadingState,{message:"Đang tải thông tin tài khoản..."}):x?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tổng quan"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Chào mừng trở lại, ",x.displayName,"! Đây là tình hình hệ thống của bạn."]})]}),(0,s.jsx)(y.Badge,{variant:{admin:"destructive",manager:"default",staff:"secondary"}[x.role]||"default",className:"text-sm",children:{admin:"Quản trị viên",manager:"Quản lý kho",staff:"Nhân viên"}[e=x.role]||e})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Tổng sản phẩm"}),(0,s.jsx)(v.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(j.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"1,234"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"text-green-600",children:"+12%"})," so với tháng trước"]})]})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Giá trị tồn kho"}),(0,s.jsx)(T.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(j.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"₫2.4M"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"text-green-600",children:"+8%"})," so với tháng trước"]})]})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Giao dịch hôm nay"}),(0,s.jsx)(I.Activity,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(j.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"47"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"text-red-600",children:"-3%"})," so với hôm qua"]})]})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Cảnh báo"}),(0,s.jsx)(S.AlertTriangle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(j.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:"3"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sản phẩm sắp hết hàng"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-7",children:[(0,s.jsxs)(j.Card,{className:"col-span-4",children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsx)(j.CardTitle,{children:"Hoạt động gần đây"}),(0,s.jsx)(j.CardDescription,{children:"Các giao dịch nhập/xuất trong 7 ngày qua"})]}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"space-y-4",children:[{type:"IN",item:"Laptop Dell XPS 13",quantity:5,time:"2 giờ trước",user:"Nguyễn Văn A"},{type:"OUT",item:"iPhone 15 Pro",quantity:2,time:"4 giờ trước",user:"Trần Thị B"},{type:"IN",item:"Samsung Galaxy S24",quantity:10,time:"6 giờ trước",user:"Lê Văn C"},{type:"OUT",item:"MacBook Air M2",quantity:1,time:"8 giờ trước",user:"Phạm Thị D"}].map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full ".concat("IN"===e.type?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:"IN"===e.type?(0,s.jsx)(b.TrendingUp,{className:"h-4 w-4"}):(0,s.jsx)(w,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm font-medium leading-none",children:["IN"===e.type?"Nhập":"Xuất"," ",e.quantity," ",e.item]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.user," • ",e.time]})]})]},a))})})]}),(0,s.jsxs)(j.Card,{className:"col-span-3",children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsx)(j.CardTitle,{children:"Thống kê nhanh"}),(0,s.jsx)(j.CardDescription,{children:"Tình hình kho hàng hiện tại"})]}),(0,s.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F.Warehouse,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Số kho hàng"})]}),(0,s.jsx)("span",{className:"font-medium",children:x.warehouses.length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Nhân viên"})]}),(0,s.jsx)("span",{className:"font-medium",children:"12"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:"Danh mục"})]}),(0,s.jsx)("span",{className:"font-medium",children:"8"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Quyền hạn của bạn"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quản lý hàng hóa"}),(0,s.jsx)(y.Badge,{variant:x.permissions.canManageInventory?"default":"secondary",className:"text-xs",children:x.permissions.canManageInventory?"Có":"Không"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Xử lý đơn hàng"}),(0,s.jsx)(y.Badge,{variant:x.permissions.canProcessOrders?"default":"secondary",className:"text-xs",children:x.permissions.canProcessOrders?"Có":"Không"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Xem báo cáo"}),(0,s.jsx)(y.Badge,{variant:x.permissions.canViewReports?"default":"secondary",className:"text-xs",children:x.permissions.canViewReports?"Có":"Không"})]})]})]})]})]})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsx)(j.CardTitle,{children:"Thao tác nhanh"}),(0,s.jsx)(j.CardDescription,{children:"Các tác vụ thường dùng để quản lý kho hàng"})]}),(0,s.jsx)(j.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(o.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>i.push("/dashboard/inventory"),children:[(0,s.jsx)(v.Package,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:"Thêm sản phẩm"})]}),(0,s.jsxs)(o.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>i.push("/dashboard/inventory"),children:[(0,s.jsx)(b.TrendingUp,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:"Nhập hàng"})]}),(0,s.jsxs)(o.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>i.push("/dashboard/inventory"),children:[(0,s.jsx)(w,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:"Xuất hàng"})]}),(0,s.jsxs)(o.Button,{className:"h-20 flex-col space-y-2",variant:"outline",onClick:()=>i.push("/dashboard/reports"),children:[(0,s.jsx)(I.Activity,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:"Xem báo cáo"})]})]})})]}),(0,s.jsx)(f,{open:h,onComplete:p})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.LoadingState,{message:"Đang thiết lập tài khoản của bạn..."}),(0,s.jsx)(f,{open:h,onComplete:p})]})}}]);