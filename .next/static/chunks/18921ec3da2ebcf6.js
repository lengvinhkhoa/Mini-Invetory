(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,43432,e=>{"use strict";e.s(["MapPin",()=>a],46897);var t=e.i(75254);let a=(0,t.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["Phone",()=>s],43432);let s=(0,t.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},21218,e=>{"use strict";e.s(["Activity",()=>t],21218);let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},81207,63488,e=>{"use strict";e.s(["WarehouseForm",()=>g],81207);var t=e.i(43476),a=e.i(71645),s=e.i(53145),r=e.i(81307),n=e.i(94814),l=e.i(76639),i=e.i(19455),c=e.i(93479),o=e.i(24687),d=e.i(3133),h=e.i(67489),u=e.i(46696),m=e.i(26633);let x=r.z.object({name:r.z.string().min(2,"Tên kho tối thiểu 2 ký tự"),address:r.z.string().min(5,"Địa chỉ tối thiểu 5 ký tự"),capacity:r.z.string().min(1,"Sức chứa là bắt buộc"),description:r.z.string().optional(),phone:r.z.string().optional(),email:r.z.string().email("Email không hợp lệ").optional().or(r.z.literal("")),status:r.z.enum(["active","inactive","maintenance"])});function g(e){var r;let{open:g,onClose:p,onSuccess:j,warehouse:f,mode:v}=e,[y,N]=(0,a.useState)(!1),C=(0,s.useForm)({resolver:(0,n.zodResolver)(x),defaultValues:{name:(null==f?void 0:f.name)||"",address:(null==f?void 0:f.address)||"",capacity:(null==f||null==(r=f.capacity)?void 0:r.toString())||"",description:(null==f?void 0:f.description)||"",phone:(null==f?void 0:f.phone)||"",email:(null==f?void 0:f.email)||"",status:(null==f?void 0:f.status)||"active"}}),w=async e=>{N(!0);try{if("create"===v){let t={name:e.name,address:e.address,capacity:parseInt(e.capacity),description:e.description,phone:e.phone,email:e.email,status:e.status,currentStock:0,totalItems:0,ownerId:"",managers:[]},a={id:await m.firestoreService.createWarehouse(t),...t,createdAt:new Date,updatedAt:new Date};u.toast.success("Tạo kho hàng thành công!"),j(a)}else if("edit"===v&&f){let t={name:e.name,address:e.address,capacity:parseInt(e.capacity),description:e.description,phone:e.phone,email:e.email,status:e.status};await m.firestoreService.updateWarehouse(f.id,t);let a={...f,...t,updatedAt:new Date};u.toast.success("Cập nhật kho hàng thành công!"),j(a)}C.reset(),p()}catch(e){console.error("Warehouse form error:",e),u.toast.error("Lỗi: "+e.message)}finally{N(!1)}},k=()=>{C.reset(),p()};return(0,t.jsx)(l.Dialog,{open:g,onOpenChange:k,children:(0,t.jsxs)(l.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:"create"===v?"Tạo kho hàng mới":"Chỉnh sửa kho hàng"}),(0,t.jsx)(l.DialogDescription,{children:"create"===v?"Điền thông tin để tạo kho hàng mới":"Cập nhật thông tin kho hàng"})]}),(0,t.jsx)(d.Form,{...C,children:(0,t.jsxs)("form",{onSubmit:C.handleSubmit(w),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(d.FormField,{control:C.control,name:"name",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Tên kho hàng *"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.Input,{placeholder:"Kho Hà Nội",...a})}),(0,t.jsx)(d.FormMessage,{})]})}}),(0,t.jsx)(d.FormField,{control:C.control,name:"status",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Trạng thái"}),(0,t.jsxs)(h.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{placeholder:"Chọn trạng thái"})})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"active",children:"Hoạt động"}),(0,t.jsx)(h.SelectItem,{value:"inactive",children:"Tạm dừng"}),(0,t.jsx)(h.SelectItem,{value:"maintenance",children:"Bảo trì"})]})]}),(0,t.jsx)(d.FormMessage,{})]})}})]}),(0,t.jsx)(d.FormField,{control:C.control,name:"address",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Địa chỉ *"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(o.Textarea,{placeholder:"123 Nguyễn Trãi, Thanh Xuân, Hà Nội",...a})}),(0,t.jsx)(d.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(d.FormField,{control:C.control,name:"capacity",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Sức chứa (m²) *"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.Input,{type:"number",placeholder:"1000",...a})}),(0,t.jsx)(d.FormMessage,{})]})}}),(0,t.jsx)(d.FormField,{control:C.control,name:"phone",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Số điện thoại"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.Input,{placeholder:"0123456789",...a})}),(0,t.jsx)(d.FormMessage,{})]})}})]}),(0,t.jsx)(d.FormField,{control:C.control,name:"email",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Email"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(c.Input,{type:"email",placeholder:"warehouse@company.com",...a})}),(0,t.jsx)(d.FormMessage,{})]})}}),(0,t.jsx)(d.FormField,{control:C.control,name:"description",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.FormItem,{children:[(0,t.jsx)(d.FormLabel,{children:"Mô tả"}),(0,t.jsx)(d.FormControl,{children:(0,t.jsx)(o.Textarea,{placeholder:"Mô tả về kho hàng...",...a})}),(0,t.jsx)(d.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:k,disabled:y,children:"Hủy"}),(0,t.jsx)(i.Button,{type:"submit",disabled:y,children:y?"create"===v?"Đang tạo...":"Đang cập nhật...":"create"===v?"Tạo kho hàng":"Cập nhật"})]})]})})]})})}e.s(["Mail",()=>p],63488);let p=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},15288,e=>{"use strict";e.s(["Card",()=>s,"CardContent",()=>i,"CardDescription",()=>l,"CardHeader",()=>r,"CardTitle",()=>n]);var t=e.i(43476),a=e.i(75157);function s(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...r})}function r(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...r})}function n(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",s),...r})}function l(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",s),...r})}function i(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",s),...r})}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},68499,e=>{"use strict";e.s(["AlertDialog",()=>A,"AlertDialogAction",()=>R,"AlertDialogCancel",()=>V,"AlertDialogContent",()=>H,"AlertDialogDescription",()=>B,"AlertDialogFooter",()=>L,"AlertDialogHeader",()=>z,"AlertDialogTitle",()=>P],68499);var t=e.i(43476),a=e.i(71645),s=e.i(30030),r=e.i(20783),n=e.i(26999),l=e.i(81140),i=e.i(91918),c="AlertDialog",[o,d]=(0,s.createContextScope)(c,[n.createDialogScope]),h=(0,n.createDialogScope)(),u=e=>{let{__scopeAlertDialog:a,...s}=e,r=h(a);return(0,t.jsx)(n.Root,{...r,...s,modal:!0})};u.displayName=c,a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=h(s);return(0,t.jsx)(n.Trigger,{...l,...r,ref:a})}).displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:a,...s}=e,r=h(a);return(0,t.jsx)(n.Portal,{...r,...s})};m.displayName="AlertDialogPortal";var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=h(s);return(0,t.jsx)(n.Overlay,{...l,...r,ref:a})});x.displayName="AlertDialogOverlay";var g="AlertDialogContent",[p,j]=o(g),f=(0,i.createSlottable)("AlertDialogContent"),v=a.forwardRef((e,s)=>{let{__scopeAlertDialog:i,children:c,...o}=e,d=h(i),u=a.useRef(null),m=(0,r.useComposedRefs)(s,u),x=a.useRef(null);return(0,t.jsx)(n.WarningProvider,{contentName:g,titleName:y,docsSlug:"alert-dialog",children:(0,t.jsx)(p,{scope:i,cancelRef:x,children:(0,t.jsxs)(n.Content,{role:"alertdialog",...d,...o,ref:m,onOpenAutoFocus:(0,l.composeEventHandlers)(o.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=x.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(f,{children:c}),(0,t.jsx)(D,{contentRef:u})]})})})});v.displayName=g;var y="AlertDialogTitle",N=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=h(s);return(0,t.jsx)(n.Title,{...l,...r,ref:a})});N.displayName=y;var C="AlertDialogDescription",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=h(s);return(0,t.jsx)(n.Description,{...l,...r,ref:a})});w.displayName=C;var k=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=h(s);return(0,t.jsx)(n.Close,{...l,...r,ref:a})});k.displayName="AlertDialogAction";var b="AlertDialogCancel",S=a.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...l}=e,{cancelRef:i}=j(b,s),c=h(s),o=(0,r.useComposedRefs)(a,i);return(0,t.jsx)(n.Close,{...c,...l,ref:o})});S.displayName=b;var D=e=>{let{contentRef:t}=e,s="`".concat(g,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(g,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(g,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},F=e.i(75157),T=e.i(19455);function A(e){let{...a}=e;return(0,t.jsx)(u,{"data-slot":"alert-dialog",...a})}function M(e){let{...a}=e;return(0,t.jsx)(m,{"data-slot":"alert-dialog-portal",...a})}function I(e){let{className:a,...s}=e;return(0,t.jsx)(x,{"data-slot":"alert-dialog-overlay",className:(0,F.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function H(e){let{className:a,...s}=e;return(0,t.jsxs)(M,{children:[(0,t.jsx)(I,{}),(0,t.jsx)(v,{"data-slot":"alert-dialog-content",className:(0,F.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...s})]})}function z(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,F.cn)("flex flex-col gap-2 text-center sm:text-left",a),...s})}function L(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,F.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function P(e){let{className:a,...s}=e;return(0,t.jsx)(N,{"data-slot":"alert-dialog-title",className:(0,F.cn)("text-lg font-semibold",a),...s})}function B(e){let{className:a,...s}=e;return(0,t.jsx)(w,{"data-slot":"alert-dialog-description",className:(0,F.cn)("text-muted-foreground text-sm",a),...s})}function R(e){let{className:a,...s}=e;return(0,t.jsx)(k,{className:(0,F.cn)((0,T.buttonVariants)(),a),...s})}function V(e){let{className:a,...s}=e;return(0,t.jsx)(S,{className:(0,F.cn)((0,T.buttonVariants)({variant:"outline"}),a),...s})}},41071,e=>{"use strict";e.s(["MoreHorizontal",()=>t],41071);let t=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},86536,e=>{"use strict";e.s(["Eye",()=>t],86536);let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},87130,e=>{"use strict";e.s(["Filter",()=>t],87130);let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},91152,e=>{"use strict";e.s(["SortAsc",()=>t],91152);let t=(0,e.i(75254).default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]])},7983,e=>{"use strict";e.s(["default",()=>M]);var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(15288),n=e.i(19455),l=e.i(93479),i=e.i(87486),c=e.i(67489),o=e.i(68499),d=e.i(55146),h=e.i(65033),u=e.i(81207),m=e.i(26633),x=e.i(33277),g=e.i(46696),p=e.i(33785),j=e.i(46897),f=e.i(61911),v=e.i(88844),y=e.i(7233),N=e.i(55436),C=e.i(41071),w=e.i(88511),k=e.i(27612),b=e.i(86536),S=e.i(43432),D=e.i(63488),F=e.i(21218),T=e.i(87130),A=e.i(91152);function M(){let e=(0,s.useRouter)(),[M,I]=(0,a.useState)([]),[H,z]=(0,a.useState)(!0),[L,P]=(0,a.useState)(""),[B,R]=(0,a.useState)("all"),[V,E]=(0,a.useState)("name"),[W,q]=(0,a.useState)(!1),[O,K]=(0,a.useState)(null),[X,U]=(0,a.useState)(null),[Q,_]=(0,a.useState)(!1),{userProfile:Y}=(0,x.useUser)(),Z=async()=>{try{z(!0);let e=await m.firestoreService.getUserWarehouses();I(e)}catch(e){console.error("Error loading warehouses:",e),g.toast.error("Lỗi khi tải danh sách kho hàng")}finally{z(!1)}};(0,a.useEffect)(()=>{Z()},[]);let G=M.filter(e=>{let t=e.name.toLowerCase().includes(L.toLowerCase())||e.address.toLowerCase().includes(L.toLowerCase()),a="all"===B||e.status===B;return t&&a}).sort((e,t)=>{switch(V){case"name":return e.name.localeCompare(t.name);case"capacity":return t.capacity-e.capacity;case"usage":return t.currentStock/t.capacity-e.currentStock/e.capacity;case"created":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}}),J=()=>{K(null),q(!0)},$=t=>{e.push("/dashboard/warehouses/".concat(t.id))},ee=async()=>{if(X&&!Q)try{_(!0);let e=await m.firestoreService.getWarehouseInventory(X.id);if(e.length>0){g.toast.error("Không thể xóa kho hàng có ".concat(e.length," sản phẩm. Vui lòng di chuyển hoặc xóa tất cả sản phẩm trước.")),U(null);return}await m.firestoreService.deleteWarehouse(X.id),I(M.filter(e=>e.id!==X.id)),g.toast.success("Xóa kho hàng thành công!")}catch(e){g.toast.error("Lỗi khi xóa kho hàng: "+e.message)}finally{_(!1),U(null)}};return H?(0,t.jsx)(h.LoadingState,{message:"Đang tải danh sách kho hàng..."}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Kho hàng"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Quản lý các kho hàng trong hệ thống (",M.length," kho)"]})]}),(0,t.jsxs)(n.Button,{onClick:J,children:[(0,t.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"Thêm kho hàng"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Tổng kho hàng"}),(0,t.jsx)(p.Warehouse,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:M.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[G.length!==M.length&&"".concat(G.length," hiển thị"),G.length===M.length&&"Trong hệ thống"]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Đang hoạt động"}),(0,t.jsx)(F.Activity,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:M.filter(e=>"active"===e.status).length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[M.filter(e=>"inactive"===e.status).length," tạm dừng, ",M.filter(e=>"maintenance"===e.status).length," bảo trì"]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Tổng sức chứa"}),(0,t.jsx)(v.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[M.reduce((e,t)=>e+t.capacity,0).toLocaleString()," m²"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Trung bình ",M.length>0?Math.round(M.reduce((e,t)=>e+t.capacity,0)/M.length).toLocaleString():0," m²/kho"]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Tỷ lệ sử dụng"}),(0,t.jsx)(v.Package,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[M.length>0?(M.reduce((e,t)=>e+t.currentStock,0)/M.reduce((e,t)=>e+t.capacity,0)*100).toFixed(1):0,"%"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[M.reduce((e,t)=>e+t.currentStock,0).toLocaleString()," / ",M.reduce((e,t)=>e+t.capacity,0).toLocaleString()," m²"]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(N.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(l.Input,{placeholder:"Tìm kiếm kho hàng...",value:L,onChange:e=>P(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.Select,{value:B,onValueChange:R,children:[(0,t.jsxs)(c.SelectTrigger,{className:"w-[140px]",children:[(0,t.jsx)(T.Filter,{className:"h-4 w-4 mr-2"}),(0,t.jsx)(c.SelectValue,{placeholder:"Trạng thái"})]}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"Tất cả"}),(0,t.jsx)(c.SelectItem,{value:"active",children:"Hoạt động"}),(0,t.jsx)(c.SelectItem,{value:"inactive",children:"Tạm dừng"}),(0,t.jsx)(c.SelectItem,{value:"maintenance",children:"Bảo trì"})]})]}),(0,t.jsxs)(c.Select,{value:V,onValueChange:E,children:[(0,t.jsxs)(c.SelectTrigger,{className:"w-[140px]",children:[(0,t.jsx)(A.SortAsc,{className:"h-4 w-4 mr-2"}),(0,t.jsx)(c.SelectValue,{placeholder:"Sắp xếp"})]}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"name",children:"Tên A-Z"}),(0,t.jsx)(c.SelectItem,{value:"capacity",children:"Sức chứa"}),(0,t.jsx)(c.SelectItem,{value:"usage",children:"Tỷ lệ sử dụng"}),(0,t.jsx)(c.SelectItem,{value:"created",children:"Mới nhất"})]})]})]})]}),0===G.length?(0,t.jsx)(r.Card,{children:(0,t.jsxs)(r.CardContent,{className:"text-center py-12",children:[(0,t.jsx)(p.Warehouse,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:L?"Không tìm thấy kho hàng":"Chưa có kho hàng"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:L?"Thử tìm kiếm với từ khóa khác":"Tạo kho hàng đầu tiên để bắt đầu quản lý"}),!L&&(0,t.jsxs)(n.Button,{onClick:J,children:[(0,t.jsx)(y.Plus,{className:"mr-2 h-4 w-4"}),"Tạo kho hàng đầu tiên"]})]})}):(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:G.map(e=>(0,t.jsxs)(r.Card,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>$(e),children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(r.CardTitle,{className:"text-lg",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"active":return(0,t.jsx)(i.Badge,{variant:"default",className:"bg-green-100 text-green-800",children:"Hoạt động"});case"inactive":return(0,t.jsx)(i.Badge,{variant:"secondary",children:"Tạm dừng"});case"maintenance":return(0,t.jsx)(i.Badge,{variant:"outline",className:"border-yellow-500 text-yellow-700",children:"Bảo trì"});default:return(0,t.jsx)(i.Badge,{variant:"outline",children:"Không xác định"})}})(e.status),(0,t.jsxs)(d.DropdownMenu,{children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(d.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),$(e)},children:[(0,t.jsx)(b.Eye,{className:"mr-2 h-4 w-4"}),"Xem chi tiết"]}),(0,t.jsxs)(d.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),K(e),q(!0)},children:[(0,t.jsx)(w.Edit,{className:"mr-2 h-4 w-4"}),"Chỉnh sửa"]}),((null==Y?void 0:Y.role)==="admin"||e.ownerId===(null==Y?void 0:Y.uid))&&(0,t.jsxs)(d.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),U(e)},className:"text-red-600",children:[(0,t.jsx)(k.Trash2,{className:"mr-2 h-4 w-4"}),"Xóa"]})]})]})]})]}),(0,t.jsxs)(r.CardDescription,{className:"flex items-center",children:[(0,t.jsx)(j.MapPin,{className:"mr-1 h-3 w-3"}),e.address]})]}),(0,t.jsxs)(r.CardContent,{className:"space-y-4",children:[(e.phone||e.email)&&(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[e.phone&&(0,t.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,t.jsx)(S.Phone,{className:"mr-2 h-3 w-3"}),e.phone]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,t.jsx)(D.Mail,{className:"mr-2 h-3 w-3"}),e.email]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(v.Package,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("span",{children:[e.totalItems||0," sản phẩm"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.Users,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("span",{children:[e.managers.length," quản lý"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"Sức chứa"}),(0,t.jsxs)("span",{children:[e.currentStock,"/",e.capacity," m²"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full ".concat(((e,t)=>{let a=e/t*100;return a>=90?"bg-red-500":a>=70?"bg-yellow-500":"bg-green-500"})(e.currentStock,e.capacity)),style:{width:"".concat(Math.min(e.currentStock/e.capacity*100,100),"%")}})}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(e.currentStock/e.capacity*100).toFixed(1),"% đã sử dụng"]})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]})]},e.id))}),M.length>0&&(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Thao tác nhanh"}),(0,t.jsx)(r.CardDescription,{children:"Các tác vụ thường dùng để quản lý kho hàng"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(n.Button,{variant:"outline",className:"h-20 flex-col space-y-2",onClick:J,children:[(0,t.jsx)(y.Plus,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Thêm kho mới"})]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"h-20 flex-col space-y-2",onClick:()=>e.push("/dashboard/inventory"),children:[(0,t.jsx)(v.Package,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Quản lý hàng hóa"})]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"h-20 flex-col space-y-2",onClick:()=>e.push("/dashboard/reports"),children:[(0,t.jsx)(F.Activity,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Báo cáo kho"})]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"h-20 flex-col space-y-2",onClick:()=>R("maintenance"),children:[(0,t.jsx)(T.Filter,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Kho bảo trì"})]})]})})]}),(0,t.jsx)(u.WarehouseForm,{open:W,onClose:()=>q(!1),onSuccess:e=>{O?I(M.map(t=>t.id===e.id?e:t)):I([e,...M])},warehouse:O,mode:O?"edit":"create"}),(0,t.jsx)(o.AlertDialog,{open:!!X,onOpenChange:()=>U(null),children:(0,t.jsxs)(o.AlertDialogContent,{children:[(0,t.jsxs)(o.AlertDialogHeader,{children:[(0,t.jsx)(o.AlertDialogTitle,{children:"Xác nhận xóa kho hàng"}),(0,t.jsxs)(o.AlertDialogDescription,{children:['Bạn có chắc chắn muốn xóa kho hàng "',null==X?void 0:X.name,'"?',(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Lưu ý:"})," Kho hàng chỉ có thể xóa khi không còn sản phẩm nào bên trong. Hành động này không thể hoàn tác."]})]}),(0,t.jsxs)(o.AlertDialogFooter,{children:[(0,t.jsx)(o.AlertDialogCancel,{disabled:Q,children:"Hủy"}),(0,t.jsx)(o.AlertDialogAction,{onClick:ee,disabled:Q,className:"bg-red-600 hover:bg-red-700",children:Q?"Đang xóa...":"Xóa"})]})]})})]})}}]);